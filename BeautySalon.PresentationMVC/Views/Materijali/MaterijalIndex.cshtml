@model IEnumerable<BeautySalon.PresentationMVC.Models.MaterijalViewModel>

@{
    ViewData["Title"] = "Popis materijala";
}

<h1>Šifrarnik materijala</h1>

<div>
    <a asp-action="Create" class="btn btn-primary">Dodaj novi materijal</a>
    <button id="editBtn" disabled class="btn btn-primary">Uredi</button>
    <button id="detailsBtn" disabled class="btn btn-info">Detalji</button>
    <button id="deleteBtn" disabled class="btn btn-danger">Obriši</button>
</div>

<table class="table" id="materijaliTable">
    <thead>
        <tr>
            <th>Šifra</th>
            <th>Naziv</th>
            <th>Minimalna količina</th>
            <th>Trenutna količina</th>
            <th>Cijena (€)</th>
            <th>Jedinica mjere</th>
            <th>Vrsta</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr data-id="@item.MaterijalId" style="cursor:pointer;">
                <td>@item.MaterijalId</td>
                <td>@item.Naziv</td>
                <td>@item.MinimalnaKolicina</td>
                <td>@item.TrenutnaKolicina</td>
                <td>@item.Cijena</td>
                <td>@item.JedinicaMjere</td>
                <td>@item.VrstaNaziv</td>
            </tr>
        }
    </tbody>
</table>

<script>        
    let selectedId = null;

    const rows = document.querySelectorAll('#materijaliTable tbody tr');

    rows.forEach(row => {
        row.addEventListener('click', () => {
            rows.forEach(r => r.style.backgroundColor = '');
            row.style.backgroundColor = '#d3d3d3';
            selectedId = row.getAttribute('data-id');

            document.getElementById('editBtn').disabled = false;
            document.getElementById('detailsBtn').disabled = false;
            document.getElementById('deleteBtn').disabled = false;
        });
    });

    document.getElementById('editBtn').addEventListener('click', () => {
        if (selectedId) {
            window.location.href = `/Materijali/Edit/${selectedId}`;
        }
    });

    document.getElementById('detailsBtn').addEventListener('click', () => {
        if (selectedId) {
            window.location.href = `/Materijali/Details/${selectedId}`;
        }
    });

    document.getElementById('deleteBtn').addEventListener('click', () => {
        if (selectedId) {
            window.location.href = `/Materijali/Delete/${selectedId}`;
        }
    });
</script>

